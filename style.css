/* ===== Design tokens ===== */
:root{
  /* ballerina pink */
  --accent: #ff77b7;
  --accent-ink: #7a0440;
  --rule: color-mix(in oklch, var(--accent) 25%, canvas);
  --border: oklch(80% 0 0);
  --page: min(1050px, 100%);
  color-scheme: light dark;
  --nav-h: 3.25rem;
  --chart-grid: color-mix(in oklch, canvastext 72%, transparent);
  --chart-axis: color-mix(in oklch, canvastext 38%, transparent);
}

@media (prefers-color-scheme: dark){
  :root{
    --rule: color-mix(in oklch, var(--accent) 25%, canvas);
    --border: oklch(30% 0 0);
    --chart-grid: color-mix(in oklch, canvastext 82%, transparent);
    --chart-axis: color-mix(in oklch, canvastext 55%, transparent);
  }
}

/* ===== Base ===== */
html{box-sizing:border-box}
*,*:before,*:after{box-sizing:inherit}
body{
  margin: 0;
  font: 400 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: canvas;
  color: canvastext;          /* good contrast in both themes */
}

img{max-width:100%;height:auto;display:block}
a{color:LinkText}

main{
  width: var(--page);
  margin: 0 auto;
  padding: calc(var(--nav-h) + 1rem) 1rem 2rem; /* top pads under nav */
}

/* ===== Nav (match the 3rd pic) ===== */
nav{
  position: fixed; inset: 0 0 auto 0;
  height: var(--nav-h);
  display: flex; align-items: center; justify-content: center;
  gap: clamp(2rem, 6vw, 5rem);
  padding: 0 clamp(.5rem, 2vw, 1rem);
  background: canvas; z-index: 10;

  /* simple, stable hairline under the whole bar (no pseudo-elements) */
  border-bottom: 1px solid color-mix(in oklch, canvastext 26%, transparent);
}

nav a,
nav a:link,
nav a:visited{
  color: canvastext;
  text-decoration: none;                   /* no blue/underline */
}

nav a{
  position: relative;                      /* for the active underline */
  padding: .6rem .8rem;
  line-height: 1;
  font-weight: 600;
  border-radius: .5rem;
}

/* Active tab: short centered underline (gray) */
nav a.current{
  font-weight: 700;
}
nav a.current::after{
  content: "";
  position: absolute;
  left: 50%; bottom: -2px;
  transform: translateX(-50%);
  width: 60%;
  height: 3px;
  background: color-mix(in oklch, canvastext 55%, transparent);
  border-radius: 999px;
}

/* Hover: subtle thin line (gray), no glow */
nav a:hover::after{
  content: "";
  position: absolute;
  left: 50%; bottom: -2px;
  transform: translateX(-50%);
  width: 60%;
  height: 2px;
  background: color-mix(in oklch, canvastext 38%, transparent);
  border-radius: 999px;
}

/* Keep the Theme picker pinned right */
.color-scheme{
  position: absolute;
  right: clamp(.5rem, 2vw, 1rem);
  top: 50%;
  transform: translateY(-50%);
  margin: 0;
  white-space: nowrap;
}

/* ===== Headings ===== */
h1{font-size:clamp(2rem,6vw,4.5rem);line-height:1.1;margin:.2rem 0 1rem}
h2{font-size:clamp(1.4rem,3.4vw,2rem);line-height:1.2;margin:0 0 .75rem}
h3{margin:.5rem 0}

/* ===== Hero (home) ===== */
.hero{text-align:center}
.hero img{width:min(90%,520px);border-radius:12px;margin:.25rem auto .75rem}
.hero p{max-width:720px;margin:0 auto;color:canvastext}

/* ===== Projects grid (home & projects page) ===== */
.home-section, .projects-section{width:var(--page);margin:2rem auto;padding:0 1rem}
.projects{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
  gap:1.1rem;
}
.projects article{
  background:canvas; color:canvastext;
  border:1px solid var(--border);
  border-radius:14px; padding:1rem;
  box-shadow:0 2px 6px color-mix(in oklch, canvastext 12%, transparent);
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.projects article:hover{
  transform:translateY(-3px);
  border-color:var(--accent);
  box-shadow:0 10px 24px color-mix(in oklch, var(--accent) 28%, transparent);
}
.projects h2, .projects h3{margin:0 0 .5rem}
.projects img{border-radius:10px;margin:.5rem 0}
.projects p{margin:0}

/* helper for error text */
.msg-error{color:crimson}

/* ===== Projects page title underline ===== */
.projects-page .projects-title{
  display:inline-block;
  border-bottom:6px solid var(--accent);
  padding-bottom:.15rem;
}

/* description + year live together so they don't overlap */
.card__textblock{
  display: grid;
  gap: .25rem;
}

/* subtle year styling under the description */
.proj-year{
  margin: .15rem 0 0;
  color: #777;
  font-family: Baskerville, "Baskerville Old Face", "Hoefler Text",
               Garamond, "Times New Roman", serif;
  font-variant-numeric: oldstyle-nums;
  font-size: .95rem;
}

/* ===== GitHub profile (bars + grid) ===== */
#profile-stats{width:var(--page);margin:2rem auto;padding:0 1rem}
#profile-stats h2{margin-bottom:.4rem}
dl.profile-grid{
  display:grid; grid-template-columns:repeat(4,1fr); gap:.5rem 1rem; margin:.35rem 0 0;
}
.profile-grid dt{grid-row:1; font-weight:700}
.profile-grid dd{grid-row:2; margin:0}

/* optional pink bars you were using */
.statbar{
  height:22px; border-radius:9999px; background:color-mix(in oklch, var(--accent) 35%, transparent);
}
.statbar > span{
  display:block; height:100%; border-radius:inherit; background:var(--accent);
  box-shadow:0 0 0 2px color-mix(in oklch, var(--accent) 20%, transparent) inset;
}

/* ===== Pie chart + legend (side-by-side, never stacks) ===== */
.pie-wrap{
  display: grid;
  grid-template-columns: minmax(360px, 1fr) 26rem; /* pie | legend */
  align-items: center;
  gap: clamp(1rem, 3vw, 2rem);
  max-width: var(--page);
  margin: 1rem auto 2rem;
  padding: 0 1rem;
}

/* SVG grows to fill the left column */
#projects-pie-plot{
  width: 100%;
  height: auto;
  overflow: visible; /* room for strokes/labels if you add them */
}

/* Single boxed legend */
.legend{
  list-style: none;
  margin: 0;
  padding: .9rem 1.1rem;
  border: 1px solid var(--border);
  border-radius: .9rem;
  background: canvas;
  box-shadow: 0 2px 8px color-mix(in oklch, canvastext 8%, transparent);

  /* items arrange in rows inside the box */
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: .6rem 1.2rem;
}

/* each legend item: inline, no mini boxes */
.legend li{
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  margin: 0;
  padding: 0;
  border: 0;
  background: transparent;
}

/* color dot */
.legend .swatch,
.legend .dot{               /* support either class name */
  inline-size: .8rem;
  block-size:  .8rem;
  border-radius: 50%;
  box-shadow: 0 0 0 2px color-mix(in oklch, canvas 30%, transparent) inset;
}

/* muted count */
.legend .count,
.legend .val{
  font-size: .9em;
  color: color-mix(in oklch, canvastext 45%, transparent);
}

/* Keep side-by-side even when narrow: just tighten columns a bit */
@media (max-width: 900px){
  .pie-wrap{
    grid-template-columns: minmax(280px, 1fr) 22rem;
  }
}
@media (max-width: 700px){
  .pie-wrap{
    grid-template-columns: minmax(240px, 1fr) 18rem;
  }
}


/* ===== CV page — “pink shadow squares” ===== */
.cv{display:grid; gap:1rem}
.cv section + section{border-top:4px solid color-mix(in oklch, var(--accent) 40%, transparent); padding-top:1rem}
.cv .item{
  background:canvas; color:canvastext;
  border:1px solid var(--border); border-radius:.9rem; padding:1rem;
  box-shadow:0 8px 24px color-mix(in oklch, var(--accent) 25%, transparent);
  transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}

/* ===== Contact page ===== */
.contact-title{
  font-size: clamp(2.2rem, 6vw, 4rem);
  line-height: 1.1;
  margin: 0 0 1.25rem;
}

.contact-form{
  width: min(860px, 100%);
  margin: 0 auto;
  display: grid;
  grid-template-columns: 140px 1fr;   /* label | field */
  gap: 1rem 1rem;
  align-items: center;
  border-top: 2px solid var(--rule);
  padding-top: 1rem;
}

.contact-form > label{
  justify-self: end;
  font-weight: 600;
}

/* full-width fields with soft “card” feel */
.contact-form input,
.contact-form textarea{
  width: 100%;
  padding: .9rem 1rem;
  border-radius: .6rem;
  border: 1px solid var(--border);
  background: color-mix(in oklch, canvas 92%, transparent);
  color: canvastext;
  box-shadow: 0 4px 10px color-mix(in oklch, canvastext 12%, transparent) inset;
}

.contact-form input::placeholder,
.contact-form textarea::placeholder{
  color: color-mix(in oklch, canvastext 45%, transparent);
}

.contact-form input:focus,
.contact-form textarea:focus{
  outline: 2px solid color-mix(in oklch, var(--accent) 60%, transparent);
  box-shadow: 0 0 0 3px color-mix(in oklch, var(--accent) 25%, transparent);
  border-color: var(--accent);
}

/* full-width button row */
.contact-actions{
  grid-column: 1 / -1;
  margin-top: .25rem;
}

.contact-actions button{
  width: 100%;
  padding: .95rem 1rem;
  border: 0;
  border-radius: .7rem;
  background: color-mix(in oklch, var(--accent) 35%, canvastext 35%);
  color: white;
  font-weight: 700;
  letter-spacing: .3px;
  cursor: pointer;
  box-shadow: 0 6px 18px color-mix(in oklch, var(--accent) 35%, transparent);
}

.contact-actions button:hover{
  transform: translateY(-1px);
  box-shadow: 0 12px 26px color-mix(in oklch, var(--accent) 45%, transparent);
}

.contact-actions button:active{ transform: translateY(0); }


.cv .item:hover{
  transform:translateY(-2px); border-color:var(--accent);
  box-shadow:0 14px 32px color-mix(in oklch, var(--accent) 35%, transparent);
}

/* ===== Utilities ===== */
.center{
  max-width: var(--page);
  margin: 0 auto;
}

/* Side-by-side layout for pie + legend */
.viz-wrap{
  display: flex;
  align-items: center;
  gap: clamp(1rem, 3vw, 2rem);
  max-width: var(--page);
  margin: 1rem auto 2rem;
  padding: 0 1rem;
}

/* Keep the pie a nice fixed visual size, let legend take remaining space */
#projects-pie-plot{
  flex: 0 0 auto;
  max-width: 28rem;   /* tweak if you want larger/smaller */
  width: 100%;
  overflow: visible;
}

.legend{ flex: 1; }
/* === Pie hover focus (Step 5.1) === */
#projects-pie-plot path{
  transition: opacity 300ms ease; /* smooth fade when hovering */
}

/* When any wedge is hovered, fade the *other* wedges */
#projects-pie-plot:has(path:hover) path:not(:hover){
  opacity: .5;
}

.stats-title{
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  line-height: 1.15;
  margin: 0 0 .6rem;
}
.stats-card{
  background: canvas;
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 2px 10px color-mix(in oklch, canvastext 10%, transparent);
  padding: 1rem 1.25rem 1.1rem;
}
/* top rule like the example */
.stats-card::before{
  content:"";
  display:block;
  height: 0.5rem;
  margin: -1rem -1.25rem 1rem;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  background: color-mix(in oklch, var(--accent) 22%, canvas);
}
/* 5–6 columns that collapse nicely */
.stats-grid{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.8rem 1.2rem;
  align-items: start;
}
* each metric */
.stat .label{
  font-size: .78rem;
  letter-spacing: .06em;
  font-weight: 700;
  color: color-mix(in oklch, canvastext 45%, transparent);
}
.stat .value{
  font-size: clamp(1.6rem, 4.2vw, 2.6rem);
  line-height: 1.05;
  font-weight: 800;
  color: canvastext;
}
.stat .sub{
  margin-top: .1rem;
  font-size: .95rem;
  color: color-mix(in oklch, canvastext 45%, transparent);
  white-space: nowrap;
}

/* fix any abbr underline look */
#stats abbr{ text-decoration: underline dotted; text-underline-offset: .15em; }

.brush .selection{
  fill: color-mix(in oklch, canvastext 8%, transparent); /* light gray */
  stroke: var(--chart-axis);          /* same gray you used for axes */
  stroke-width: 2;
  stroke-dasharray: 5 4;              /* <-- dashed border */
  shape-rendering: crispEdges;
}
.brush .overlay{ cursor: crosshair; }


#files {
  display: grid;
  grid-template-columns: 1fr 4fr;
  gap: 0.25rem 1rem;
  margin: 1rem 0;
}

#files > div {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: subgrid;
}

#files dt {
  grid-column: 1;
}

#files dt small {
  display: block;
  font-size: 0.75rem;
  margin-top: 0.15rem;
  color: color-mix(in oklch, canvastext 55%, transparent);
}
#files dd {
  grid-column: 2;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  align-content: flex-start;
  gap: 0.15em;
  padding-top: 0.6em;
  color: color-mix(in oklch, canvastext 45%, transparent);
  font-size: 0.9rem;
  
}

.loc {
  display: block;
  width: 0.5em;
  aspect-ratio: 1;
  border-radius: 50%;
  background: var(--accent);
}

#files code {
  font-size: 0.9rem;
}







circle {
  transform-origin: center;
  transform-box: fill-box;
  transition: all 200ms ease-out;

  @starting-style {
    r: 0;
  }
}

circle:hover {
  transform: scale(1.5);
}

circle.selected {
  fill: #B91C1C
}

#evolution-layout {
  display: grid;
  grid-template-columns: minmax(260px, 1fr) minmax(360px, 1.4fr);
  gap: 1.5rem;
  align-items: flex-start;
  margin-top: 1.5rem;
}

#scrolly-1 {
  position: relative;
}

#scatter-story .step {
  max-width: 36rem;
  padding: 0.75rem 0 1rem;
  border-bottom: 1px solid color-mix(in oklch, canvastext 15%, transparent);
}
#scatter-story .step:last-child {
  padding-bottom: 0.5rem;
  border-bottom: none;
}

#scatter-plot {
  position: sticky;
  top: calc(var(--nav-h) + 1rem);
  left: 0;
  bottom: auto;
  display: flex;
  flex-direction: column;
   gap: 0.75rem;
  align-items: stretch;
}

#scatter-plot #chart {
  flex: 1;
  min-height: 0;
}

#selection-count {
  margin: 0.5rem 0 0.25rem;
}

#language-breakdown {
  margin-top: 0.25rem;
}

#code-layout {
  display: grid;
  grid-template-columns: minmax(260px, 1.4fr) minmax(260px, 1fr);
  gap: 1.5rem;
  align-items: flex-start;
  margin-top: 1.5rem;
}
#code-layout > div:first-child {
  position: sticky;
  top: calc(var(--nav-h) + 1rem);
  align-self: start;
  max-height: calc(100vh - var(--nav-h) - 2rem);
  overflow-y: auto;
}


#scrolly-2 {
  position: relative;
}
#scrolly-2 .step {
  max-width: 36rem;
  padding: 0.75rem 0 1rem;
  border-bottom: 1px solid color-mix(in oklch, canvastext 15%, transparent);
}
#scrolly-2 .step p {
  margin: 0.25rem 0;
}

#scatter-story .step p,
#scrolly-2 .step p {
  margin: 0 0 0.35rem;   
}
#scatter-story .step + .step,
#scrolly-2 .step + .step {
  margin-top: 0.75rem;   
}