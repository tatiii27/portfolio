/* ----- Base ----- */
:root{
  --bg:#eef1f5;
  --ink:#1f2937;
  --muted:#6b7280;
  --card:#ffffff;
  --line:#e5e7eb;
  --accent:#3b82f6;
}
*{box-sizing:border-box}
html,body{height:100%}
html{background:var(--bg); color:var(--ink); font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}
body{max-width:min(80rem, 78vw); margin:0 auto; padding:1.25rem}

/* ----- Headers / sections ----- */
header{ text-align:center; margin: 0 0 1rem }
h1{ font-size: clamp(1.8rem, 1.1rem + 2.5vw, 3rem); margin:.5rem 0 0 }
h1 small{
  display:block; margin:.25rem auto .75rem; padding:.2rem .5rem; width:fit-content;
  background:#111827; color:#fff; border-radius:.375rem; letter-spacing:.06em; text-transform:uppercase; font-size:.7rem
}
h2{ font-size:1.4rem; margin:1rem 0 .5rem; padding-bottom:.25rem; border-bottom:1px solid var(--line) }
h3{ font-size:1.05rem; margin:.25rem 0 .25rem }

/* ----- Card figure ----- */
figure{
  background:var(--card); border:1px solid var(--line); border-radius:.75rem;
  padding: .75rem; margin: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,.05)
}
figcaption{
  font-size:.9rem; color:var(--muted); background:#f8fafc;
  margin:.75rem -0.75rem -0.75rem; padding:.5rem .75rem; border-top:1px solid var(--line);
}

/* ----- Controls row ----- */
#controls{
  display:flex; flex-wrap:wrap; gap:.6rem 1rem; align-items:center;
  background:#f8fafc; border:1px solid var(--line); border-radius:.5rem; padding:.5rem .75rem; margin:.25rem 0 .75rem
}
#controls label{ font-weight:600; color:#374151 }
#controls select, #controls input[type="range"], #controls button{
  font:inherit; padding:.35rem .5rem; border:1px solid var(--line); border-radius:.375rem; background:#fff
}
#controls button{ background:var(--accent); color:#fff; border-color:transparent; cursor:pointer }
#controls button:hover{ filter:brightness(.95) }

/* ----- Viz canvas ----- */
.viz-viewport{ width:100%; overflow:hidden }
.viz-canvas{ width:100%; position:relative }
#brand-bubble-chart{ width:100%; height:680px; display:block }

/* grid lines under bubbles */
.x-grid{ stroke:#e5e7eb; stroke-width:1 }

/* ----- Bubble labels ----- */
.label-halo{ fill:#fff; stroke:#fff; stroke-width:3; paint-order:stroke }
.label-text{ fill:#111827; font-weight:600 }

/* ----- Tooltip ----- */
#tooltip{
  position:absolute; pointer-events:none; opacity:0;
  background:#ffffff; color:#111827; border:1px solid var(--line);
  border-radius:.5rem; padding:.5rem .6rem; box-shadow:0 8px 24px rgba(0,0,0,.12); font-size:.9rem
}

/* ----- Annotations panel ----- */
#annotations{
  max-width: 640px; margin:.75rem auto; background:#fff; border:1px solid var(--line);
  border-radius:.75rem; padding:.75rem; text-align:left
}
#annotations .row{ margin:.15rem 0; color:#374151 }
#annotations em{ color:var(--muted); font-style:italic }
#annotations .eyebrow{
  display:inline-block; font-size:.75rem; letter-spacing:.06em; text-transform:uppercase;
  color:#6b7280; background:#f3f4f6; padding:.15rem .4rem; border-radius:.35rem; margin-right:.25rem
}

/* ----- Helpers ----- */
.hidden{ display:none !important }